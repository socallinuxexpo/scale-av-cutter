scale-av-cutter tools
===

These tools do not require a server to run. They have dependencies independent
of those of the main scale-av-cutter Flask app, so if you intend to run these
tools, first install the dependencies from the requirements.txt in this
directory. Python 3 required. virtualenv is recommended.

```
pip install --update -r requirements.txt
```

***Note***: You will also need ffmpeg installed on your system, accessible via
command line, because one of the tools will invoke it.


split.py
---

This script uses the output from the scale-av-cutter app's **/json** endpoint
to download the full day streams from Youtube, and then cut them up into talk
videos based on the timestamps.

Run it with -h to see the options.


upload.py
---

This script uploads the videos generated by split.py to the user's Youtube
account. It also requires data from the webapp's json endpoint, in order to
know where split.py placed all the talk videos, and what title/description to
upload the videos with.

### Authentication/Authorization

To interact with Google's API, we need to understand its flow at a high level.

1. Authentication. This script needs to authenticate to Google, via a "client
   id" and "client secret", so they track the request quota. You can create a
   Google API "client" or "application", and download a `client_secrets.json`
   to use this script, but it'll only have enough quota to upload 4-5 videos.
   Either request a higher limit with Google, or ask a SCaLE AV maintainer for
   a client with higher limit.

2. Authorization. When using this script for the first time, it will ask you to
   login to a Google account, which then authorizes the script (via OAuth) to
   upload videos.

### Behavior

upload.py will upload videos with the exact same title as the talk, and a video
description of the format:

```
{speakers}

{url to talk in SCaLE website}

{talk description}
```

Note that the title and video description will be validated to conform to the
[YouTube
specs](https://developers.google.com/youtube/terms/required-minimum-functionality#data-requirements)
(last checked, 2020-03-17). If invalid, upload.py allows the user to optionally
specify a `youtube_title` and `youtube_description` in the JSON that will be
used for uploading to YouTube.

By default, videos will be uploaded as unlisted, but this can be changed with a
flag if desired.

Run it with -h to see the options.
